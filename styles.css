/* Weekly Report Manager Plugin Styles */

/* ==========================================================================
   CSS Custom Properties (Variables)
   ========================================================================== */
:root {
  /* ==========================================================================
     Task Card Variables
     ========================================================================== */

  /* --- Shared --- */
  --task-indent-guide-width: 30px;
  --task-btn-border-radius: 4px;

  /* --- Select Mode (Edit/Delete Buttons) --- */
  --task-select-btn-size: 24px;
  --task-select-icon-size: 15px;

  /* --- Edit/Add Mode (Save/Cancel Buttons) --- */
  --task-edit-btn-size: 18px;
  --task-edit-icon-size: 12px;
}

/* ==========================================================================
   Utility Classes (for replacing inline styles)
   ========================================================================== */
.weeknote-hidden {
  display: none !important;
}

.weeknote-flex {
  display: flex !important;
}

.weeknote-visible {
  display: block !important;
}

/* Settings page styles */
.weeknote-settings-control-column {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}

.weeknote-settings-preview {
  font-size: 0.8em;
  color: var(--text-muted);
  opacity: 0.7;
  margin-top: 4px;
  text-align: right;
  width: 100%;
}

.weeknote-template-preview {
  min-height: 100px;
}

/* Ko-fi support section in settings */
.weeknote-kofi-section {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 16px;
  margin-top: 32px;
  padding-top: 16px;
  border-top: 1px solid var(--background-modifier-border);
}

.weeknote-kofi-text {
  color: var(--text-muted);
  font-size: 0.9em;
}

.weeknote-kofi-section a {
  display: inline-block;
  transition: opacity 0.2s ease;
}

.weeknote-kofi-section a:hover {
  opacity: 0.8;
}

.weeknote-kofi-img {
  height: 36px;
  border: 0;
}

/* Copy Task Options Styles */
.copy-option-relative {
  color: var(--text-muted);
  font-size: 0.75em;
  line-height: 1.2;
  margin-bottom: 2px;
  text-align: center;
  white-space: nowrap;
  text-transform: none;
}

.copy-option-date {
  color: var(--text-normal);
  font-size: 0.9em;
  line-height: 1.2;
  text-align: center;
  white-space: nowrap;
}

.copy-option-loading {
  opacity: 0.7;
  cursor: wait;
}

.copy-option-button-disabled {
  pointer-events: none;
  opacity: 0.5;
}

.weeknote-container {
  padding: 12px;
  display: flex;
  flex-direction: column;
  height: 100%;
  gap: 12px;
  overflow: hidden;
  background: var(--background-secondary);
  box-sizing: border-box;
}


/* Content area with resizable sections */
.weeknote-content-area {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;
  overflow: hidden;
}

.weeknote-section {
  display: flex;
  flex-direction: column;
  min-height: 60px;
  overflow: hidden;
}

.weeknote-section h5 {
  margin: 0 0 8px 0;
  flex-shrink: 0;
}

/* Resizer */
.weeknote-resizer {
  height: 6px;
  background: transparent;
  cursor: ns-resize;
  flex-shrink: 0;
  position: relative;
  margin: 2px 0;
}

.weeknote-resizer::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 30px;
  height: 3px;
  background: var(--background-modifier-border);
  border-radius: 2px;
  transition: background 0.15s ease;
}

.weeknote-resizer:hover::after,
.weeknote-resizer.is-dragging::after {
  background: var(--interactive-accent);
}

/* Header */
.weeknote-header {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  padding-bottom: 12px;
  border-bottom: 1px solid var(--background-modifier-border);
  gap: 12px;
}

.weeknote-title h4 {
  margin: 0;
  font-size: 1.1em;
  font-weight: 600;
  background: linear-gradient(135deg, var(--text-normal), var(--text-muted));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.weeknote-nav-center {
  display: flex;
  align-items: center;
  gap: 8px;
  justify-content: center;
}

.weeknote-nav-right {
  display: flex;
  justify-content: flex-end;
  align-items: center;
}

.weeknote-nav-btn {
  background: transparent;
  border: none;
  box-shadow: none;
  padding: 0;
  height: 16px;
  min-width: 16px;
  display: flex;
  justify-content: center;
  align-items: center;
  color: var(--text-muted);
  cursor: pointer;
  border-radius: 4px;
  transition: all 0.2s ease;
}

.weeknote-nav-btn:hover {
  color: var(--text-normal);
  background: var(--background-modifier-hover);
}

.weeknote-nav-btn.weeknote-nav-today {
  width: auto;
  padding: 0 10px;
  font-size: 0.8em;
  font-weight: 500;
  background: var(--background-primary);
  border: 1px solid var(--background-modifier-border);
  color: var(--text-normal);
}

.weeknote-nav-btn.weeknote-nav-today:hover {
  background: var(--interactive-accent);
  color: var(--text-on-accent);
  border-color: var(--interactive-accent);
}

.weeknote-week-info {
  margin: 0 4px;
  font-size: 1.0em;
  font-weight: 700;
  color: var(--interactive-accent);
  font-family: var(--font-monospace);
  white-space: nowrap;
  letter-spacing: 0.5px;
  position: relative;
  top: 0.5px;
}



/* Action Buttons */
.weeknote-actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.weeknote-create-btn,
.weeknote-open-btn {
  flex: 1;
  min-width: 120px;
  padding: 10px 16px;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 0.9em;
}

.weeknote-create-btn {
  background-color: var(--interactive-accent) !important;
  color: #fff !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

.weeknote-create-btn:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
}

.weeknote-open-btn {
  background: var(--background-secondary);
  color: var(--text-normal);
  border: 1px solid var(--background-modifier-border);
}

.weeknote-open-btn:hover {
  background: var(--background-modifier-hover);
}

/* Day Selector (Box style) */
.weeknote-tabs {
  display: flex;
  gap: 4px;
  overflow: hidden;
  padding: 4px 1px 2px 1px;
  margin-bottom: 0;
}

.weeknote-tab {
  flex: 1;
  min-width: 0;
  padding: 6px 4px;
  text-align: center;
  cursor: pointer;
  border-radius: 6px;
  background: var(--background-secondary);
  border: 1px solid var(--background-modifier-border-hover);
  transition: all 0.15s ease;
  position: relative;
}

.weeknote-tab:hover {
  background: var(--background-modifier-hover);
}

.weeknote-tab.is-active {
  background: var(--background-primary);
  border-color: var(--interactive-accent);
  box-shadow: 0 0 0 1px var(--interactive-accent);
}

.weeknote-tab.is-today {
  border-color: var(--interactive-accent);
}

.weeknote-tab.is-today .weeknote-tab-date {
  color: var(--interactive-accent);
  font-weight: 600;
}

.weeknote-tab-date {
  font-size: 0.75em;
  color: var(--text-normal);
  font-weight: 500;
}

.weeknote-tab-day {
  font-size: 0.65em;
  color: var(--text-muted);
  margin-top: 2px;
}

/* Sunday - Muted red */
.weeknote-tab.is-sunday .weeknote-tab-day {
  color: #c44d56;
}

/* Saturday - Muted blue */
.weeknote-tab.is-saturday .weeknote-tab-day {
  color: #5a7fbd;
}

/* Editor */
.weeknote-editor {
  margin-bottom: 8px;
}

.weeknote-editor textarea {
  width: 100%;
  min-height: 50px;
  padding: 12px 14px;
  border: 1px solid var(--interactive-accent);
  border-radius: 10px;
  background: var(--background-primary);
  color: var(--text-normal);
  font-size: 0.9em;
  resize: none;
  font-family: inherit;
  transition: all 0.2s ease;
}

.weeknote-editor textarea:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(var(--interactive-accent-rgb), 0.15);
}

.weeknote-editor textarea::placeholder {
  color: var(--text-faint);
}

.weeknote-buttons {
  display: flex;
  justify-content: flex-end;
  flex-shrink: 0;
}

.weeknote-save-btn {
  padding: 8px 20px;
  border: none;
  border-radius: 6px;
  background-color: var(--interactive-accent) !important;
  color: #fff !important;
  font-weight: 600;
  cursor: pointer;
  font-size: 0.85em;
  transition: all 0.2s ease;
}

.weeknote-save-btn:hover {
  transform: translateY(-1px);
}

/* Combined Memo Section */
.weeknote-memo-combined {
  flex: 1 1 auto;
  min-height: 150px;
  display: flex;
  flex-direction: column;
  background: var(--background-primary);
  border-radius: 10px;
  padding: 12px;
  border: 1px solid var(--background-modifier-border);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
  overflow: hidden;
  position: relative;
}

.weeknote-memo-combined h5 {
  margin: 0 0 8px 0;
  font-size: 0.75em;
  color: var(--text-muted);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  flex-shrink: 0;
}

/* Memo list - scrollable with scroll shadows */
.weeknote-memo-list-wrapper {
  flex: 1;
  min-height: 0;
  position: relative;
  overflow: hidden;
}

/* Scroll shadow indicators for memo list wrapper and task list wrapper */
.weeknote-memo-list-wrapper::before,
.weeknote-memo-list-wrapper::after,
.weeknote-task-list-wrapper::before,
.weeknote-task-list-wrapper::after {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  height: 40px;
  pointer-events: none;
  z-index: 10;
  opacity: 0;
  transition: opacity 0.25s ease;
}

/* Top shadow - indicates can scroll up */
.weeknote-memo-list-wrapper::before,
.weeknote-task-list-wrapper::before {
  top: 0;
  background: linear-gradient(to bottom,
      rgba(0, 0, 0, 0.12) 0%,
      rgba(0, 0, 0, 0.03) 50%,
      transparent 100%);
}

/* Bottom shadow - indicates can scroll down */
.weeknote-memo-list-wrapper::after,
.weeknote-task-list-wrapper::after {
  bottom: 0;
  background: linear-gradient(to top,
      rgba(0, 0, 0, 0.12) 0%,
      rgba(0, 0, 0, 0.03) 50%,
      transparent 100%);
}

/* Light theme adjustments */
.theme-light .weeknote-memo-list-wrapper::before,
.theme-light .weeknote-task-list-wrapper::before {
  background: linear-gradient(to bottom,
      rgba(0, 0, 0, 0.08) 0%,
      rgba(0, 0, 0, 0.015) 50%,
      transparent 100%);
}

.theme-light .weeknote-memo-list-wrapper::after,
.theme-light .weeknote-task-list-wrapper::after {
  background: linear-gradient(to top,
      rgba(0, 0, 0, 0.08) 0%,
      rgba(0, 0, 0, 0.015) 50%,
      transparent 100%);
}

/* Show shadows based on scroll state (controlled by JS) */
.weeknote-memo-list-wrapper.can-scroll-up::before,
.weeknote-task-list-wrapper.can-scroll-up::before {
  opacity: 1;
}

.weeknote-memo-list-wrapper.can-scroll-down::after,
.weeknote-task-list-wrapper.can-scroll-down::after {
  opacity: 1;
}

/* Base styles for task list wrapper (for shadow pseudo-elements) */
.weeknote-task-list-wrapper {
  position: relative;
  overflow: hidden;
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: column;
}

/* Task list inside wrapper should fill and scroll */
.weeknote-task-list-wrapper .weeknote-task-list {
  flex: 1;
  min-height: 0;
  overflow: auto;
}

/* Standard Scroll Behavior */
.weeknote-memo-list {
  transform: translateY(0);
  /* Use standard overflow rules */
}

.weeknote-memo-list.no-scroll {
  overflow-y: hidden !important;
}

.weeknote-memo-list.is-pulling {
  /* Disable transition while pulling to follow finger/wheel exactly */
  transition: none;
}

.weeknote-memo-combined .weeknote-memo-list {
  flex: 1;
  overflow-y: auto;
  min-height: 0;
  height: 100%;
  display: flex;
  flex-direction: column;
  gap: 8px;
  position: relative;
}

/* When there are few memos, push them to the bottom */
.weeknote-memo-combined .weeknote-memo-list::before {
  content: '';
  flex: 1;
}

/* Input area - fixed at bottom */
.weeknote-input-area {
  flex-shrink: 0;
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px solid var(--background-modifier-border);
}

.weeknote-input-area .weeknote-editor {
  margin-bottom: 4px;
}

.weeknote-input-area .weeknote-editor textarea {
  width: 100%;
  min-height: 50px;
  max-height: 150px;
  padding: 10px 12px;
  border: 1px solid var(--interactive-accent);
  border-radius: 8px;
  background: var(--background-primary);
  color: var(--text-normal);
  font-size: 0.9em;
  resize: vertical;
  font-family: inherit;
  box-sizing: border-box;
}

.weeknote-input-area .weeknote-editor textarea:focus {
  outline: 2px solid var(--interactive-accent);
  outline-offset: -1px;
  transition: none;
}

.weeknote-input-area .weeknote-buttons {
  display: flex;
  justify-content: flex-end;
}

/* Memo Replies */
.weeknote-memo-replies {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.weeknote-card-reply {
  margin-left: 24px;
  background: var(--background-secondary-alt);
  font-size: 0.95em;
  padding: 8px 12px;
  border-left: 2px solid var(--background-modifier-border);
}

.weeknote-card-reply::before {
  display: none;
  /* Parent bar is hidden for replies */
}

.weeknote-reply-indicator {
  position: absolute;
  left: -20px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--text-muted);
  font-size: 0.9em;
  font-family: var(--font-monospace);
  opacity: 0.6;
}

.weeknote-memo-reply-input-container {
  margin-left: 24px;
  padding: 8px;
  background: var(--background-secondary-alt);
  border-radius: 8px;
  border: 1px dashed var(--interactive-accent);
  margin-bottom: 8px;
}

.weeknote-memo-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  overflow-y: auto;
  flex: 1;
  min-height: 0;
  padding: 2px;
  /* Prevent selection border from being clipped */
}

/* Memo Card */
.weeknote-card {
  position: relative;
  padding: 10px 14px;
  background: var(--background-primary);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  border: 1px solid var(--background-modifier-border);
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  flex-shrink: 0;
}

.weeknote-card::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  background: var(--interactive-accent);
  border-radius: 3px 0 0 3px;
  opacity: 0.6;
}

.weeknote-card:hover {
  background: var(--background-primary);
  border-color: var(--interactive-accent);
}

.weeknote-card:hover::before {
  opacity: 1;
}

.weeknote-card-content {
  flex: 1;
  min-width: 0;
  /* Allow flex item to shrink below content size */
  font-size: 0.85em;
  line-height: 1.5;
  color: var(--text-normal);
  overflow: hidden;
  /* Allow text to wrap naturally */
  white-space: normal;
  word-wrap: break-word;
}

.weeknote-card-time {
  flex-shrink: 0;
  font-size: 0.7em;
  color: var(--text-muted);
  font-family: var(--font-monospace);
  white-space: nowrap;
}

/* Rich tags in memo cards should truncate when space is limited */
.weeknote-card-content .github-link-inline {
  display: inline-flex;
  max-width: 100%;
  vertical-align: middle;
}

.weeknote-card-content .github-link-inline-section {
  min-width: 0;
  overflow: hidden;
}

/* Ensure title sections can truncate properly */
.weeknote-card-content .github-link-inline-pr-title,
.weeknote-card-content .github-link-inline-issue-title,
.weeknote-card-content .github-link-inline-issue-title-section {
  flex-shrink: 1;
  min-width: 20px;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Editing state */
.weeknote-card-editing {
  cursor: default;
  background: var(--background-primary);
  border-color: var(--interactive-accent);
  box-shadow: 0 0 0 2px rgba(var(--interactive-accent-rgb), 0.15);
}

.weeknote-card-editing:hover {
  transform: none;
}

.weeknote-card-editing::before {
  background: var(--interactive-accent);
  opacity: 1;
}

.weeknote-card-edit-wrapper {
  display: flex;
  gap: 6px;
  align-items: center;
  width: 100%;
  margin: -4px 0;
}

.weeknote-card-input {
  flex: 1;
  height: 22px;
  padding: 2px 6px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 4px;
  background: var(--background-primary);
  color: var(--text-normal);
  font-size: 0.85em;
  line-height: 1.4;
  font-family: inherit;
}

.weeknote-card-input:focus {
  outline: none;
  border-color: var(--interactive-accent);
  box-shadow: none;
}

.weeknote-card-buttons {
  display: flex;
  flex-direction: row;
  gap: 4px;
  flex-shrink: 0;
}

.weeknote-card-save,
.weeknote-card-cancel,
.weeknote-card-delete {
  width: 24px;
  height: 24px;
  padding: 0;
  border: none;
  border-radius: 4px;
  font-size: 0.75em;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.weeknote-card-save {
  background-color: var(--interactive-accent) !important;
  color: #fff !important;
}

.weeknote-card-save:hover {
  opacity: 0.9;
}

.weeknote-card-cancel {
  background: var(--background-modifier-border);
  color: var(--text-normal);
}

.weeknote-card-cancel:hover {
  background: var(--background-modifier-border-hover);
}

.weeknote-card-delete {
  background: var(--text-error);
  color: #fff;
}

.weeknote-card-delete:hover {
  opacity: 0.9;
}

.weeknote-card-delete svg {
  width: 14px;
  height: 14px;
}

/* Schedule Section */
.weeknote-schedule-section {
  background: var(--background-primary);
  border-radius: 10px;
  padding: 12px;
  border: 1px solid var(--background-modifier-border);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
  flex: 0 0 auto;
  min-height: fit-content;
  max-height: 50%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* Empty schedule state needs more height */
.weeknote-schedule-section:has(.weeknote-empty) {
  min-height: 140px;
}

.weeknote-schedule-section h5 {
  margin: 0;
  font-size: 0.75em;
  color: var(--text-muted);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.weeknote-schedule-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
  flex-shrink: 0;
}

.weeknote-reload-btn {
  width: 22px;
  height: 22px;
  padding: 0;
  border: none;
  border-radius: 4px;
  background: transparent;
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.15s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.weeknote-reload-btn:hover {
  color: var(--text-normal);
  background: var(--background-modifier-hover);
}

.weeknote-reload-btn svg {
  width: 14px;
  height: 14px;
}

/* Loading state - just rotate the icon */
.weeknote-reload-btn.is-loading svg {
  animation: spin 1s linear infinite;
}

/* Memo Header */
.weeknote-memo-header {
  display: flex;
  align-items: center;
  /* justify-content: space-between; Removed to allow margin-left: auto on help button */
  margin-bottom: 8px;
  flex-shrink: 0;
}

.weeknote-memo-header h5 {
  margin: 0;
}

.weeknote-view-toggle-btn {
  padding: 2px 8px;
  border: 1px solid var(--background-modifier-border-hover);
  border-radius: 4px;
  background: var(--background-secondary);
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.15s ease;
  font-size: 0.7em;
  font-weight: 600;
  letter-spacing: 0.5px;
  text-transform: uppercase;
  display: flex;
  align-items: center;
  gap: 4px;
}

.weeknote-view-toggle-btn svg {
  width: 12px;
  height: 12px;
}

.weeknote-view-toggle-btn:hover {
  color: var(--text-normal);
  background: var(--background-modifier-hover);
  border-color: var(--text-muted);
}

/* Task Container */
.weeknote-task-container {
  display: flex;
  flex-direction: column;
  flex: 1 1 auto;
  min-height: 0;
  overflow: hidden;
  position: relative;
}

/* Task List */
.weeknote-task-list {
  flex: 1;
  overflow: auto;
  /* Both directions, show scrollbar only when needed */
  scrollbar-gutter: stable;
  padding: 8px 0;
  position: relative;
  background-color: var(--background-primary);
  border-radius: 6px;
  min-height: 50px;
}

.weeknote-task-list:focus {
  outline: none;
}

.weeknote-task-grid {
  display: flex;
  flex-direction: column;
  gap: 0;
  padding: 0;
  min-width: max-content;
  /* Allow grid to expand beyond container for horizontal scroll */
}

/* Insert button between cards - overlay style */
.task-insert-btn {
  display: flex;
  align-items: center;
  height: 14px;
  margin: -7px 0;
  padding: 0;
  opacity: 0;
  transition: opacity 0.1s ease;
  cursor: pointer;
  position: relative;
  z-index: 15;
  overflow: visible;
}

.task-insert-btn:hover {
  opacity: 1;
}

.task-insert-btn::before {
  content: "";
  flex: 1;
  height: 2px;
  background: linear-gradient(to right, transparent, var(--interactive-accent) 20%);
  position: relative;
  top: 0;
}

.task-insert-btn::after {
  content: "";
  flex: 1;
  height: 2px;
  background: linear-gradient(to left, transparent, var(--interactive-accent) 20%);
  position: relative;
  top: 0;
}

.task-insert-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  color: var(--interactive-accent);
  background: var(--background-primary);
  border-radius: 50%;
  margin: 0 2px;
  position: relative;
  top: 0;
}

.task-insert-icon svg {
  width: 14px;
  height: 14px;
}


/* Hover effect */
.weeknote-task-list.disable-hover .task-insert-btn:hover {
  opacity: 0;
}

/* Hide insert buttons when editing */
.weeknote-task-grid:has(.is-editing) .task-insert-btn {
  opacity: 0 !important;
  pointer-events: none;
}

.weeknote-task-row.is-checked {
  opacity: 0.6;
}

.weeknote-task-row.is-checked .task-title-cell {
  text-decoration: line-through;
  color: var(--text-muted);
}

/* Grid cells */
.task-cell {
  display: flex;
  align-items: center;
  flex-shrink: 0;
}

.task-indent-cell {
  display: flex;
  gap: 0;
  min-width: 0;
  padding: 0;
}

/* Indent guides for tree structure */
.task-indent-guide {
  width: var(--task-indent-guide-width);
  align-self: stretch;
  /* Match parent height */
  position: relative;
  flex-shrink: 0;
}

/* Vertical line ‚îÇ */
.task-indent-guide.is-vertical::before {
  content: "";
  position: absolute;
  top: -4px;
  /* Extend slightly to connect with upper row */
  bottom: -4px;
  /* Extend slightly to connect with lower row */
  left: 17px;
  /* Adjusted visually */
  width: 1px;
  background-color: var(--background-modifier-border);
}

/* Corner ‚îî */
.task-indent-guide.is-corner::before {
  content: "";
  position: absolute;
  top: -4px;
  /* Connect from top */
  height: calc(50% + 4px);
  /* Stop at middle */
  left: 17px;
  width: 1px;
  background-color: var(--background-modifier-border);
}

.task-indent-guide.is-corner::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 17px;
  right: -8px;
  /* Extend to card content */
  height: 1px;
  background-color: var(--background-modifier-border);
}

/* Tee ‚îú */
.task-indent-guide.is-tee::before {
  content: "";
  position: absolute;
  top: -4px;
  bottom: -4px;
  left: 17px;
  width: 1px;
  background-color: var(--background-modifier-border);
}

.task-indent-guide.is-tee::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 17px;
  right: -8px;
  /* Extend to card content */
  height: 1px;
  background-color: var(--background-modifier-border);
}

.weeknote-task-row {
  display: flex;
  align-items: stretch;
  padding: 0;
  min-height: 28px;
  position: relative;
  /* z-index only set on editing row to stay above siblings */
  /* Decoration moved to .task-card */
}

.task-card {
  flex: 1;
  display: flex;
  align-items: center;
  border: 2px solid transparent;
  border-radius: 4px;
  background-color: transparent;
  transition: background-color 0.1s ease, border-color 0.1s ease;
  padding-right: 8px;
  /* For delete button etc */
  padding-left: 8px;
  /* Add left padding */
  position: relative;
  /* z-index removed - stacking managed at row level */
  min-width: 0;
  /* Enable text truncation */
  box-sizing: border-box;
}

/* Hover effect on card, not row */
/* Hover effect on card - exclude editing rows */
.weeknote-task-row:not(.is-editing):hover .task-card {
  background-color: var(--background-primary-alt);
}

.weeknote-task-row.is-selected .task-card {
  background-color: var(--background-primary);
  border-color: var(--interactive-accent);
}

.weeknote-task-row.is-selected:not(.is-editing):hover .task-card {
  background-color: var(--background-primary-alt);
}

/* Editing state */
.weeknote-task-row.is-editing .task-card {
  background-color: var(--background-modifier-hover);
  border: 2px solid var(--interactive-accent);
  box-shadow: none;
  /* Add padding around text input */
  padding: 4px 8px;
  /* Negative margin to prevent pushing content below */
  margin-top: -4px;
  margin-bottom: -4px;
  position: relative;
  z-index: 10;
}

/* Adding state (new task input) */
.weeknote-task-row.is-adding .task-card {
  background-color: var(--background-primary);
  border: 2px solid color-mix(in srgb, var(--interactive-accent) 50%, transparent);
  box-shadow: none;
  padding: 2px 8px;
  /* Slightly smaller than editing card */
  margin-top: -2px;
  margin-bottom: -2px;
}

/* Override row border/bg */
.weeknote-task-row.is-selected,
.weeknote-task-row.is-editing,
.weeknote-task-row.is-adding {
  background: transparent;
  border-color: transparent;
  box-shadow: none;
}

.weeknote-task-row.is-adding {
  margin-top: 4px;
  margin-bottom: 4px;
  /* Same vertical margin as other rows */
}


.task-check-cell {
  display: flex;
  align-items: center;
  padding-right: 4px;
  /* Small gap between checkbox and title */
}

.weeknote-task-checkbox {
  width: 16px;
  height: 16px;
  cursor: pointer;
}

.task-title-cell {
  flex: 1;
  min-width: 0;
  font-size: 0.85em;
  line-height: 1.4;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  padding: 2px 6px;
}

/* Inline code styling for task/memo cards */
.task-md-decoration code,
.weeknote-card-content code,
.task-title-cell code {
  background: color-mix(in srgb, var(--text-muted) 20%, transparent);
  padding: 0.1em 0.4em;
  border-radius: 3px;
  font-family: var(--font-monospace);
  font-size: 0.9em;
}

/* Task edit input */
.task-edit-input {
  width: 100% !important;
  box-sizing: border-box !important;
  padding: 2px 0;
  margin: 0 0 0 -2px !important;
  font-size: inherit;
  border: none !important;
  border-radius: 4px;
  background: var(--background-primary);
  outline: none;
  height: 24px !important;
  line-height: 1.4;
  flex: 1;
}

.task-edit-input:focus {
  box-shadow: none !important;
}

.weeknote-task-row.is-editing {
  /* Border removed from row, managed by task-card */
  height: auto;
  min-height: 28px;
  /* Ensure editing row stays above adjacent cards */
  position: relative;
  z-index: 20;
}

/* Remove padding from title cell when editing */
.weeknote-task-row.is-editing .task-title-cell {
  padding: 0 !important;
  text-decoration: none !important;
  color: var(--text-normal) !important;
}


.weeknote-task-row.is-editing .task-icon-cell {
  display: none;
}

.task-edit-wrapper {
  display: flex;
  align-items: center;
  width: 100%;
  gap: 6px;
  padding: 0;
}

.task-edit-buttons {
  display: flex;
  gap: 6px;
  margin-left: auto;
}

.task-edit-save,
.task-edit-cancel {
  border: none;
  padding: 0;
  cursor: pointer;
  border-radius: var(--task-btn-border-radius);
  display: flex;
  align-items: center;
  justify-content: center;
  height: var(--task-edit-btn-size);
  width: var(--task-edit-btn-size);
  font-size: var(--task-edit-icon-size);
}

.task-edit-save {
  background-color: var(--interactive-accent) !important;
  color: var(--text-on-accent) !important;
}

.task-edit-cancel {
  background: transparent;
  color: var(--text-faint);
}

.task-edit-save:hover {
  opacity: 0.85;
}

.task-edit-cancel:hover {
  background: var(--background-modifier-hover);
}

/* Edit button on task row (visible only when selected) */
.task-edit-btn {
  display: none;
  position: absolute;
  right: 36px;
  /* 8px (delete button right) + 24px (delete button width) + 4px gap */
  top: 50%;
  transform: translateY(-50%);
  width: var(--task-select-btn-size);
  height: var(--task-select-btn-size);
  border-radius: var(--task-btn-border-radius);
  cursor: pointer;
  color: var(--text-faint);
  align-items: center;
  justify-content: center;
}

.task-edit-btn:hover {
  background: var(--background-modifier-hover);
  color: var(--interactive-accent);
}

.task-edit-btn svg {
  width: var(--task-select-icon-size);
  height: var(--task-select-icon-size);
}

/* Delete button on task row (visible only when selected) */
.task-delete-btn {
  display: none;
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  width: var(--task-select-btn-size);
  height: var(--task-select-btn-size);
  border-radius: var(--task-btn-border-radius);
  cursor: pointer;
  color: var(--text-faint);
  align-items: center;
  justify-content: center;
}

.task-delete-btn:hover {
  background: var(--background-modifier-hover);
  color: var(--interactive-accent);
}

.task-delete-btn svg {
  width: var(--task-select-icon-size);
  height: var(--task-select-icon-size);
}

/* Show edit and delete buttons only when row is selected */
.weeknote-task-row.is-selected .task-edit-btn,
.weeknote-task-row.is-selected .task-delete-btn {
  display: flex;
}

/* Hide edit and delete buttons when editing */
.weeknote-task-row.is-editing .task-edit-btn,
.weeknote-task-row.is-editing .task-delete-btn {
  display: none;
}

.task-link {
  color: var(--text-accent);
  text-decoration: none;
  cursor: pointer;
}

.task-link:hover {
  text-decoration: underline;
}

.task-icon-cell {
  width: 20px;
  justify-content: center;
}

.task-icon-cell svg {
  width: 14px;
  height: 14px;
}

.task-link-issue {
  color: #238636;
}

.task-link-pr {
  color: #8957e5;
}

/* Card selection state for keyboard navigation */
.weeknote-task-row.is-selected {
  /* Border moved to .task-card */
  border: none;
  background: transparent;
  z-index: 5;
}

.weeknote-task-row.is-selected .task-card {
  border: 2px solid var(--interactive-accent);
  /* Adjust padding needed? task-card has min-height and padding. 
     Normally 2px border reduces inner space. */
}

.weeknote-task-row:focus {
  outline: none;
}

.weeknote-task-row.is-selected:focus {
  outline: none;
}

/* Move mode - when Shift is held */
/* Move mode - when Shift is held */
.weeknote-task-row.is-move-mode .task-card {
  background-color: var(--background-modifier-hover);
}

/* Children container - no longer used but keep for compatibility */
.task-children {
  display: none;
}

/* Add Task Button */
.weeknote-add-task-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 8px;
  /* Match task card padding */
  margin-top: 8px;
  border-radius: 6px;
  border: 2px solid transparent;
  /* For consistent is-selected border */
  color: var(--text-accent) !important;
  cursor: pointer;
  transition: all 0.15s ease;
  font-size: 0.85em;
}

.weeknote-add-task-btn:hover {
  background: var(--background-modifier-hover);
  color: var(--text-accent);
  opacity: 0.8;
}

.weeknote-add-task-btn:focus {
  outline: none;
}

.weeknote-add-task-btn.is-selected {
  border: 2px solid var(--interactive-accent);
  background: transparent;
}

.weeknote-add-task-btn svg {
  width: 14px;
  height: 14px;
  margin-left: 6px;
  /* Align with task checkbox position */
}

/* Help Button and Panel */
.task-help-row {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 8px;
  position: relative;
}

.task-help-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  color: var(--text-muted);
  cursor: pointer;
  border-radius: 50%;
  transition: color 0.1s ease, background 0.1s ease;
}

/* Header Help Button Specifics */
.task-help-row.header-help {
  margin-top: 0;
  margin-left: auto;
  margin-right: 4px;
  gap: 4px;
}

.task-help-row.header-help .task-help-btn {
  border-radius: 4px;
  /* Square shape */
}

.task-help-btn:hover {
  color: var(--text-normal);
  background: var(--background-modifier-hover);
}

.task-help-btn svg {
  width: 14px;
  height: 14px;
}

.task-help-panel {
  display: none;
  position: fixed;
  /* Fixed to escape overflow:hidden in parent containers */
  left: 0;
  top: 0;
  background: var(--background-primary);
  border: 1px solid var(--background-modifier-border);
  border-radius: 8px;
  padding: 12px 16px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
  z-index: 10000;
  min-width: 200px;
  width: max-content;
  max-width: 280px;
}

.task-help-panel.is-visible {
  display: block;
}

.help-title {
  font-weight: 600;
  font-size: 0.9em;
  margin-bottom: 8px;
  color: var(--text-normal);
}

.help-item {
  display: flex;
  gap: 8px;
  font-size: 0.8em;
  color: var(--text-muted);
  margin: 4px 0;
  white-space: nowrap;
}

.help-key {
  background: var(--background-secondary);
  padding: 2px 6px;
  border-radius: 4px;
  font-family: monospace;
  font-size: 0.85em;
  color: var(--text-normal);
  min-width: 80px;
}

.help-separator {
  height: 1px;
  background: var(--background-modifier-border);
  margin: 8px 0;
}

.help-section-title {
  font-weight: 600;
  font-size: 0.75em;
  color: var(--text-muted);
  margin: 10px 0 4px 0;
  padding-top: 6px;
  border-top: 1px solid var(--background-modifier-border);
}

.help-section-title:first-of-type {
  margin-top: 4px;
  padding-top: 0;
  border-top: none;
}




@keyframes spin {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(360deg);
  }
}

.weeknote-schedule-list {
  display: flex;
  flex-direction: column;
  gap: 0;
  overflow: auto;
  /* Both directions, show scrollbar only when needed */
  scrollbar-gutter: stable both-edges;
  flex: 1;
  min-height: 0;
  position: relative;
}

/* Force scrollbar to always be visible when scrollable */
.weeknote-schedule-list::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.weeknote-schedule-list::-webkit-scrollbar-track {
  background: var(--background-secondary);
  border-radius: 4px;
}

.weeknote-schedule-list::-webkit-scrollbar-thumb {
  background: var(--background-modifier-border-hover);
  border-radius: 4px;
}

.weeknote-schedule-list::-webkit-scrollbar-thumb:hover {
  background: var(--text-muted);
}

.weeknote-schedule-card {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px 0 6px 12px;
  min-height: 24px;
  min-width: max-content;
  /* Allow card to expand beyond container for horizontal scroll */
  background: transparent;
  border: none;
  border-bottom: 1px solid var(--background-modifier-border);
  transition: all 0.15s ease;
  overflow: visible;
}

.weeknote-schedule-card:last-child {
  border-bottom: none;
}

.weeknote-schedule-card:hover {
  background: var(--background-secondary);
  margin: 0 -8px;
  padding: 6px 8px 6px 20px;
  border-radius: 6px;
  border-bottom-color: transparent;
}

.weeknote-schedule-checkbox {
  cursor: pointer;
  flex-shrink: 0;
}

.weeknote-schedule-content {
  flex: 1;
  min-width: 0;
  min-height: 16px;
  font-size: 0.85em;
  line-height: 1;
  color: var(--text-normal);
  display: flex;
  flex-wrap: nowrap;
  align-items: center;
  gap: 6px;
  overflow: visible;
}

/* Schedule item components */
.schedule-time {
  font-weight: 600;
  color: var(--text-accent);
  font-family: var(--font-monospace);
  font-size: 1em;
  flex-shrink: 0;
  line-height: 1;
  transform: translateY(0.5px);
  user-select: text;
  cursor: text;
}

.schedule-event-name {
  color: var(--text-normal);
  flex-shrink: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  line-height: 1;
  user-select: text;
  cursor: text;
}

.schedule-meet-link {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  border-radius: 3px;
  background: var(--interactive-accent);
  color: white;
  text-decoration: none;
  transition: all 0.15s ease;
  flex-shrink: 0;
}

.schedule-meet-link:hover {
  background: var(--interactive-accent-hover);
  color: white;
  transform: scale(1.1);
}

.schedule-meet-link svg {
  width: 10px;
  height: 10px;
  color: white;
}

.schedule-location {
  display: inline-block;
  background: var(--background-modifier-hover);
  color: var(--text-muted);
  padding: 2px 8px;
  border-radius: 12px;
  font-size: 0.85em;
  white-space: nowrap;
  max-width: 150px;
  overflow: hidden;
  text-overflow: ellipsis;
  flex-shrink: 0;
  cursor: default;
}

/* Location Tooltip (positioned in body) */
.schedule-location-tooltip {
  position: fixed;
  background: var(--background-primary);
  color: var(--text-normal);
  padding: 8px 12px;
  border-radius: 6px;
  font-size: 0.85em;
  white-space: nowrap;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  border: 1px solid var(--background-modifier-border);
  z-index: 9999;
  pointer-events: none;
  animation: tooltip-fade-in 0.15s ease;
}

.schedule-location-tooltip::after {
  content: "";
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  border: 6px solid transparent;
  border-top-color: var(--background-modifier-border);
}

@keyframes tooltip-fade-in {
  from {
    opacity: 0;
    transform: translateY(4px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Empty State */
.weeknote-empty {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  color: var(--text-faint);
  font-size: 0.8em;
  text-align: center;
  padding: 24px 16px;
  background: var(--background-secondary);
  border-radius: 10px;
  border: 2px dashed var(--background-modifier-border);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.weeknote-empty::before {
  content: 'üìù';
  display: block;
  font-size: 1.5em;
  margin-bottom: 6px;
}

/* Settings Styles */
.sections-container {
  margin-bottom: 16px;
}

.section-item {
  background: var(--background-secondary);
  border-radius: 8px;
  padding: 4px 12px;
  margin-bottom: 6px;
  border: 1px solid var(--background-modifier-border);
}

.section-item .setting-item {
  border: none;
  padding: 2px 0;
}

.section-item .setting-item-control {
  flex-wrap: wrap;
  gap: 8px;
}

.section-item .setting-item-control input {
  min-width: 200px;
  width: 200px;
}

/* Setting section heading (h3) */
.setting-section-heading {
  margin-top: 32px;
}

.setting-section-heading:first-of-type {
  margin-top: 0;
}

/* Setting subheading (h4) */
.setting-subheading {
  margin: 12px 0 6px 0;
  font-size: 1em;
  font-weight: 600;
  color: var(--text-normal);
}

/* GitHub account settings group */
.account-settings-group {
  margin-left: 16px;
  margin-top: 4px;
  margin-bottom: 12px;
  padding: 12px;
  border-left: 2px solid var(--background-modifier-border);
  background-color: var(--background-secondary);
  border-radius: 4px;
}

.account-settings-header-container {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

/* Utility: Limit textarea resize to vertical */
.vertical-resize-textarea textarea {
  resize: vertical;
}

.account-settings-header {
  margin: 0;
  font-size: 0.95em;
  font-weight: 600;
  color: var(--text-accent);
}

/* Day section items label and wrapper */
.day-section-items-label {
  border: none;
  padding: 0;
  margin-bottom: 8px;
}

.day-section-items-label .setting-item-info {
  margin-top: 8px;
}

.day-sections-wrapper {
  margin-left: 5%;
}

/* Disabled section item */
.section-item-disabled {
  opacity: 0.5;
}

/* Readonly memo heading input */
.memo-heading-readonly {
  background: var(--background-secondary) !important;
  color: var(--text-muted) !important;
  cursor: not-allowed !important;
}

.section-item-disabled .setting-item-name {
  text-decoration: line-through;
}

/* Path Preview */
.path-preview-content {
  padding: 10px 14px;
  background: var(--background-primary);
}

.path-preview-content code {
  font-size: 0.85em;
  background: var(--background-secondary);
  padding: 4px 8px;
  border-radius: 4px;
}

/* Template Preview */
.template-preview-container {
  margin-top: 16px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 8px;
  overflow: hidden;
}

.template-preview-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 14px;
  background: var(--background-secondary);
  font-weight: 500;
  font-size: 0.9em;
}

.template-preview-buttons {
  display: flex;
  gap: 4px;
  align-items: center;
  height: 24px;
}

.template-preview-toggle,
.template-preview-refresh {
  height: 24px;
  border: none;
  border-radius: 4px;
  background: transparent;
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.15s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.template-preview-toggle {
  padding: 0 10px;
  font-size: 0.75em;
}

.template-preview-refresh {
  width: 24px;
  padding: 0;
}

.template-preview-toggle:hover,
.template-preview-refresh:hover {
  color: var(--text-normal);
  background: var(--background-modifier-hover);
}

.template-preview-refresh svg {
  width: 14px;
  height: 14px;
  transition: transform 0.3s ease;
}

.template-preview-refresh.spinning svg {
  animation: spin 0.5s ease;
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(360deg);
  }
}

.template-preview-content {
  padding: 12px;
  background: var(--background-primary);
  border-top: 1px solid var(--background-modifier-border);
}

.template-preview-code {
  margin: 0;
  padding: 12px;
  background: var(--background-secondary);
  border-radius: 6px;
  font-size: 0.8em;
  line-height: 1.5;
  overflow-x: auto;
}

.template-preview-code code {
  white-space: pre-wrap;
  word-break: break-word;
}

/* Path Preview */
.path-preview {
  background: var(--background-secondary);
  border: 1px solid var(--background-modifier-border);
  border-radius: 8px;
  padding: 12px 16px;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.path-preview-label {
  color: var(--text-muted);
  font-size: 0.9em;
  font-weight: 500;
}

.path-preview-path {
  background: var(--background-primary);
  padding: 4px 10px;
  border-radius: 4px;
  font-size: 0.85em;
  color: var(--text-accent);
  border: 1px solid var(--background-modifier-border);
  word-break: break-all;
}

/* Mobile Adjustments */
@media (max-width: 600px) {
  .weeknote-container {
    padding: 12px;
    gap: 12px;
  }

  .weeknote-actions {
    flex-direction: column;
  }

  .weeknote-create-btn,
  .weeknote-open-btn {
    min-width: 100%;
  }

  .weeknote-editor textarea {
    min-height: 60px;
  }

  .weeknote-card {
    padding: 12px 14px;
  }
}

/* Copy Tasks UI */
.weeknote-copy-tasks-wrapper {
  background-color: var(--background-secondary);
  padding: 16px;
  border-radius: 8px;
  width: 100%;
  display: flex;
  gap: 12px;
  justify-content: center;
  align-items: center;
  flex-wrap: wrap;
  margin-bottom: 12px;
  border: 1px solid var(--background-modifier-border);
}

.copy-task-option-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 10px 16px;
  background-color: var(--background-primary);
  border: 1px solid var(--background-modifier-border);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  min-width: 110px;
}

.copy-task-option-btn:hover {
  border-color: var(--interactive-accent);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  transform: translateY(-1px);
}

.copy-task-option-btn:active {
  transform: translateY(0);
}

.copy-task-option-btn.is-loading {
  opacity: 0.7;
  cursor: wait;
}

.copy-option-relative {
  font-size: 0.8em;
  color: var(--text-muted);
  margin-bottom: 4px;
  letter-spacing: 0.5px;
}

.copy-option-date {
  font-size: 0.85em;
  font-weight: normal;
  color: var(--text-normal);
}

.weeknote-empty .weeknote-copy-tasks-wrapper {
  background: transparent;
  border: none;
  padding: 12px 0 0 0;
  margin-bottom: 0;
  width: 100%;
}

/* Remove scrollbar gutter when showing Copy from zone */
.weeknote-task-list.is-empty-state {
  scrollbar-gutter: auto;
}

.weeknote-empty.is-tasks-empty::before {
  display: none !important;
}

.weeknote-empty.is-tasks-empty {
  padding: 16px;
}

.copy-task-option-btn {
  flex-direction: column !important;
  height: auto !important;
  line-height: 1.4 !important;
}

/* Force layout layout and button styling */
.weeknote-copy-tasks-wrapper {
  flex-wrap: nowrap !important;
  gap: 8px !important;
  padding: 12px 0 0 0 !important;
}

.copy-task-option-btn {
  display: flex !important;
  flex-direction: column !important;
  justify-content: center !important;
  align-items: center !important;
  flex: 0 0 auto !important;
  min-width: 70px !important;
  width: auto !important;
  padding: 6px 10px !important;
  margin: 0 !important;

  /* White background with accent border */
  background-color: white !important;
  color: var(--text-normal) !important;
  border: 1.5px solid var(--interactive-accent) !important;
  border-radius: 6px !important;
  cursor: pointer !important;
  transition: all 0.15s ease !important;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05) !important;
  user-select: none;
}

.copy-task-option-btn:hover {
  background-color: var(--interactive-accent) !important;
  color: white !important;
  transform: translateY(-1px);
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15) !important;
}

.copy-task-option-btn:active {
  transform: translateY(0);
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1) !important;
}

.copy-option-relative {
  display: block !important;
  width: 100%;
  text-align: center;
  margin-bottom: 2px !important;
  font-size: 0.8em !important;
  line-height: 1.2;
  color: var(--text-muted) !important;
}

.copy-task-option-btn:hover .copy-option-relative {
  color: rgba(255, 255, 255, 0.85) !important;
}

.copy-option-date {
  display: block !important;
  width: 100%;
  text-align: center;
  font-size: 0.85em !important;
  line-height: 1.2;
  font-weight: normal;
  color: var(--text-normal) !important;
}

.copy-task-option-btn:hover .copy-option-date {
  color: white !important;
}

.copy-task-option-btn.is-disabled {
  opacity: 0.5;
  cursor: default;
  pointer-events: none;
  background-color: var(--background-secondary) !important;
  color: var(--text-muted) !important;
  border-color: var(--background-modifier-border) !important;
  box-shadow: none !important;
  transform: none !important;
}

.copy-task-option-btn.is-disabled .copy-option-relative,
.copy-task-option-btn.is-disabled .copy-option-date {
  color: var(--text-muted) !important;
}

.weeknote-setting-control-column {
  flex-direction: column !important;
  align-items: flex-end !important;
}

/* ==========================================================================
   Three-Panel Layout
   ========================================================================== */

.weeknote-three-panel {
  flex-direction: row !important;
  gap: 12px;
}

.weeknote-panel {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-width: 0;
  min-height: 0;
  background: var(--background-primary);
  border-radius: 8px;
  padding: 12px;
  overflow: hidden;
}

.weeknote-panel-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
  flex-shrink: 0;
}

.weeknote-panel-header h5 {
  margin: 0;
  font-size: 0.75em;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  flex: 1;
}

/* Schedule panel in three-panel mode */
.weeknote-schedule-panel {
  flex: 0.8;
}

.weeknote-schedule-panel .weeknote-schedule-list {
  flex: 1;
  overflow-y: auto;
}

/* Task panel in three-panel mode */
.weeknote-task-panel {
  flex: 1.2;
  background: var(--background-primary);
  position: relative;
  z-index: 5;
  overflow: hidden !important;
  /* Clip tooltips to panel */
}

/* Scroll shadow indicators for task panel */
.weeknote-task-panel::before,
.weeknote-task-panel::after {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  height: 40px;
  pointer-events: none;
  z-index: 10;
  opacity: 0;
  transition: opacity 0.25s ease;
}

/* Top shadow - indicates can scroll up */
.weeknote-task-panel::before {
  top: 0;
  background: linear-gradient(to bottom,
      rgba(0, 0, 0, 0.2) 0%,
      rgba(0, 0, 0, 0.05) 50%,
      transparent 100%);
}

/* Bottom shadow - indicates can scroll down */
.weeknote-task-panel::after {
  bottom: 0;
  background: linear-gradient(to top,
      rgba(0, 0, 0, 0.2) 0%,
      rgba(0, 0, 0, 0.05) 50%,
      transparent 100%);
}

/* Light theme adjustments */
.theme-light .weeknote-task-panel::before {
  background: linear-gradient(to bottom,
      rgba(0, 0, 0, 0.1) 0%,
      rgba(0, 0, 0, 0.02) 50%,
      transparent 100%);
}

.theme-light .weeknote-task-panel::after {
  background: linear-gradient(to top,
      rgba(0, 0, 0, 0.1) 0%,
      rgba(0, 0, 0, 0.02) 50%,
      transparent 100%);
}

/* Show shadows based on scroll state (controlled by JS) */
.weeknote-task-panel.can-scroll-up::before {
  opacity: 1;
}

.weeknote-task-panel.can-scroll-down::after {
  opacity: 1;
}

.weeknote-task-panel .weeknote-task-list {
  flex: 1;
  overflow-y: auto;
}

/* Memo panel in three-panel mode */
.weeknote-memo-panel {
  flex: 1;
  display: flex;
  flex-direction: column;
  background: var(--background-primary);
  position: relative;
  z-index: 10;
}

.weeknote-memo-panel .weeknote-memo-list-wrapper {
  flex: 1;
  min-height: 0;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.weeknote-memo-panel .weeknote-memo-list {
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
}

.weeknote-memo-panel .weeknote-input-area {
  flex-shrink: 0;
  margin-top: 8px;
}

.weeknote-memo-panel .weeknote-editor {
  margin-bottom: 8px;
}

.weeknote-memo-panel .weeknote-editor textarea {
  min-height: 60px;
  max-height: 100px;
}

/* Responsive: stack vertically on narrow views */
@media (max-width: 600px) {
  .weeknote-three-panel {
    flex-direction: column !important;
  }

  .weeknote-panel {
    flex: none;
    max-height: 300px;
  }
}

/* Panel resizer for three-panel layout */
.weeknote-panel-resizer {
  width: 4px;
  margin: 0 -4px;
  cursor: col-resize;
  background: transparent;
  flex-shrink: 0;
  position: relative;
  z-index: 10;
}

.weeknote-panel-resizer::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 3px;
  height: 40px;
  background: var(--text-muted);
  border-radius: 2px;
  opacity: 0.25;
  transition: opacity 0.15s ease, height 0.15s ease, background 0.15s ease;
}

.weeknote-panel-resizer:hover::after {
  opacity: 0.6;
  height: 60px;
  background: var(--text-accent);
}

.weeknote-panel-resizer.is-dragging::after {
  opacity: 1;
  height: 80px;
  background: var(--text-accent);
}

/* Three-panel Horizontal Layout (Vertical Stack) */
.weeknote-three-panel-horizontal {
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
  gap: 0;
  /* Gaps handled by margins/padding if needed, or rely on resizers */
}

.weeknote-three-panel-horizontal .weeknote-section,
.weeknote-three-panel-horizontal .weeknote-memo-combined {
  flex: 1;
  min-height: 60px;
  max-height: none;
  height: auto;
}

.weeknote-three-panel-horizontal .weeknote-memo-bottom {
  margin-bottom: -4px;
  /* Fix slight gap when schedule is present */
}

.weeknote-three-panel-horizontal .weeknote-schedule-section {
  flex: 0 0 auto;
  min-height: 60px;
  max-height: 50vh;
  height: auto;
  overflow-y: auto;
}

.weeknote-three-panel-horizontal .weeknote-schedule-section:has(.weeknote-empty) {
  min-height: 140px;
}

.weeknote-three-panel-horizontal .weeknote-memo-bottom:has(.weeknote-empty) {
  min-height: 260px;
}

/* Horizontal Resizer (Vertical Drag) */
.weeknote-panel-resizer-h {
  height: 4px;
  margin: -2px 0;
  cursor: row-resize;
  background: transparent;
  flex-shrink: 0;
  position: relative;
  z-index: 10;
  width: 100%;
}

.weeknote-panel-resizer-h::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 40px;
  height: 3px;
  background: var(--text-muted);
  border-radius: 2px;
  opacity: 0.3;
  transition: opacity 0.2s ease;
}

.weeknote-panel-resizer-h:hover::after,
.weeknote-panel-resizer-h.is-dragging::after {
  opacity: 0.8;
  background: var(--text-accent);
}

.weeknote-panel-resizer-h.is-dragging::after {
  opacity: 1;
  width: 80px;
}

/* ============================================
   T-Panel Layout: Schedule Top + Task/Memo Bottom Row
   ============================================ */

.weeknote-t-panel {
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
  gap: 0;
}

/* Schedule section in T-panel (top, full width) */
.weeknote-t-panel .weeknote-schedule-section {
  flex: 0 0 auto;
  min-height: 60px;
  max-height: 50vh;
  overflow-y: auto;
}

.weeknote-t-panel .weeknote-schedule-section:has(.weeknote-empty) {
  min-height: 140px;
}

/* Horizontal resizer margin in T-panel (same as three-panel-horizontal) */
.weeknote-t-panel>.weeknote-resizer {
  margin: 2px 0;
}

/* Bottom row container (Task + Memo side by side) */
.weeknote-t-panel-bottom-row {
  display: flex;
  flex-direction: row;
  flex: 1;
  min-height: 150px;
  overflow: hidden;
  gap: 0;
}

/* Task and Memo panels in bottom row */
.weeknote-t-panel-bottom-row .weeknote-section {
  flex: 1;
  min-width: 100px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* Vertical resizer (horizontal drag) between Task and Memo */
.weeknote-resizer-vertical {
  width: 6px;
  height: 100%;
  background: transparent;
  cursor: ew-resize;
  flex-shrink: 0;
  position: relative;
  z-index: 10;
  margin: 0 2px;
}

.weeknote-resizer-vertical::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 3px;
  height: 40px;
  background: var(--text-muted);
  border-radius: 2px;
  opacity: 0.3;
  transition: opacity 0.2s ease;
}

.weeknote-resizer-vertical:hover::after,
.weeknote-resizer-vertical.is-dragging::after {
  opacity: 0.8;
  background: var(--text-accent);
}

.weeknote-resizer-vertical.is-dragging::after {
  opacity: 1;
  height: 60px;
}

:root,
body.theme-light {
  --gh-color-fg-default: #1f2328;
  --gh-color-fg-muted: #656d76;
  --gh-color-fg-subtle: #6e7781;
  --gh-color-fg-on-emphasis: #ffffff;
  --gh-color-canvas-default: #ffffff;
  --gh-color-canvas-overlay: #ffffff;
  --gh-color-canvas-inset: #f6f8fa;
  --gh-color-canvas-subtle: #f6f8fa;
  --gh-color-border-default: #d0d7de;
  --gh-color-border-muted: hsla(210, 18%, 87%, 1);
  --gh-color-border-subtle: rgba(31, 35, 40, 0.15);
  --gh-color-shadow-small: 0 1px 0 rgba(31, 35, 40, 0.04);
  --gh-color-shadow-medium: 0 3px 6px rgba(140, 149, 159, 0.15);
  --gh-color-shadow-large: 0 8px 24px rgba(140, 149, 159, 0.2);
  --gh-color-shadow-extra-large: 0 12px 28px rgba(140, 149, 159, 0.3);
  --gh-color-neutral-emphasis-plus: #24292f;
  --gh-color-neutral-emphasis: #6e7781;
  --gh-color-neutral-muted: rgba(175, 184, 193, 0.2);
  --gh-color-neutral-subtle: rgba(234, 238, 242, 0.5);
  --gh-color-accent-fg: #0969da;
  --gh-color-accent-emphasis: #0969da;
  --gh-color-accent-muted: rgba(84, 174, 255, 0.4);
  --gh-color-accent-subtle: #ddf4ff;
  --gh-color-success-fg: #1a7f37;
  --gh-color-success-emphasis: #1f883d;
  --gh-color-success-muted: rgba(74, 194, 107, 0.4);
  --gh-color-success-subtle: #dafbe1;
  --gh-color-attention-fg: #9a6700;
  --gh-color-attention-emphasis: #9a6700;
  --gh-color-attention-muted: rgba(212, 167, 44, 0.4);
  --gh-color-attention-subtle: #fff8c5;
  --gh-color-severe-fg: #bc4c00;
  --gh-color-severe-emphasis: #bc4c00;
  --gh-color-severe-muted: rgba(251, 143, 68, 0.4);
  --gh-color-severe-subtle: #fff1e5;
  --gh-color-danger-fg: #d1242f;
  --gh-color-danger-emphasis: #cf222e;
  --gh-color-danger-muted: rgba(255, 129, 130, 0.4);
  --gh-color-danger-subtle: #ffebe9;
  --gh-color-open-fg: #1a7f37;
  --gh-color-open-emphasis: #1f883d;
  --gh-color-open-muted: rgba(74, 194, 107, 0.4);
  --gh-color-open-subtle: #dafbe1;
  --gh-color-closed-fg: #d1242f;
  --gh-color-closed-emphasis: #cf222e;
  --gh-color-closed-muted: rgba(255, 129, 130, 0.4);
  --gh-color-closed-subtle: #ffebe9;
  --gh-color-done-fg: #8250df;
  --gh-color-done-emphasis: #8250df;
  --gh-color-done-muted: rgba(194, 151, 255, 0.4);
  --gh-color-done-subtle: #fbefff;
  --gh-color-sponsors-fg: #bf3989;
  --gh-color-sponsors-emphasis: #bf3989;
  --gh-color-sponsors-muted: rgba(255, 128, 200, 0.4);
  --gh-color-sponsors-subtle: #ffeff7;
  --gh-color-primer-fg-disabled: #8c959f;
  --gh-color-primer-canvas-backdrop: rgba(31, 35, 40, 0.5);
  --gh-color-primer-canvas-sticky: rgba(255, 255, 255, 0.95);
  --gh-color-primer-border-active: #fd8c73;
  --gh-color-primer-border-contrast: rgba(31, 35, 40, 0.1);
  --gh-color-primer-shadow-highlight: inset 0 1px 0 rgba(255, 255, 255, 0.25);
  --gh-color-primer-shadow-inset: inset 0 1px 0 rgba(208, 215, 222, 0.2);
  --status-color: var(--gh-color-canvas-subtle);
}

body.theme-dark {
  --gh-color-fg-default: #e6edf3;
  --gh-color-fg-muted: #848d97;
  --gh-color-fg-subtle: #6e7681;
  --gh-color-fg-on-emphasis: #ffffff;
  --gh-color-canvas-default: #0d1117;
  --gh-color-canvas-overlay: #161b22;
  --gh-color-canvas-inset: #010409;
  --gh-color-canvas-subtle: #161b22;
  --gh-color-border-default: #30363d;
  --gh-color-border-muted: #21262d;
  --gh-color-border-subtle: rgba(240, 246, 252, 0.1);
  --gh-color-shadow-small: 0 0 transparent;
  --gh-color-shadow-medium: 0 3px 6px #010409;
  --gh-color-shadow-large: 0 8px 24px #010409;
  --gh-color-shadow-extra-large: 0 12px 48px #010409;
  --gh-color-neutral-emphasis-plus: #6e7681;
  --gh-color-neutral-emphasis: #6e7681;
  --gh-color-neutral-muted: rgba(110, 118, 129, 0.4);
  --gh-color-neutral-subtle: rgba(110, 118, 129, 0.1);
  --gh-color-accent-fg: #2f81f7;
  --gh-color-accent-emphasis: #1f6feb;
  --gh-color-accent-muted: rgba(56, 139, 253, 0.4);
  --gh-color-accent-subtle: rgba(56, 139, 253, 0.1);
  --gh-color-success-fg: #3fb950;
  --gh-color-success-emphasis: #238636;
  --gh-color-success-muted: rgba(46, 160, 67, 0.4);
  --gh-color-success-subtle: rgba(46, 160, 67, 0.15);
  --gh-color-attention-fg: #d29922;
  --gh-color-attention-emphasis: #9e6a03;
  --gh-color-attention-muted: rgba(187, 128, 9, 0.4);
  --gh-color-attention-subtle: rgba(187, 128, 9, 0.15);
  --gh-color-severe-fg: #db6d28;
  --gh-color-severe-emphasis: #bd561d;
  --gh-color-severe-muted: rgba(219, 109, 40, 0.4);
  --gh-color-severe-subtle: rgba(219, 109, 40, 0.1);
  --gh-color-danger-fg: #f85149;
  --gh-color-danger-emphasis: #da3633;
  --gh-color-danger-muted: rgba(248, 81, 73, 0.4);
  --gh-color-danger-subtle: rgba(248, 81, 73, 0.1);
  --gh-color-open-fg: #3fb950;
  --gh-color-open-emphasis: #238636;
  --gh-color-open-muted: rgba(46, 160, 67, 0.4);
  --gh-color-open-subtle: rgba(46, 160, 67, 0.15);
  --gh-color-closed-fg: #f85149;
  --gh-color-closed-emphasis: #da3633;
  --gh-color-closed-muted: rgba(248, 81, 73, 0.4);
  --gh-color-closed-subtle: rgba(248, 81, 73, 0.15);
  --gh-color-done-fg: #a371f7;
  --gh-color-done-emphasis: #8957e5;
  --gh-color-done-muted: rgba(163, 113, 247, 0.4);
  --gh-color-done-subtle: rgba(163, 113, 247, 0.1);
  --gh-color-sponsors-fg: #db61a2;
  --gh-color-sponsors-emphasis: #bf4b8a;
  --gh-color-sponsors-muted: rgba(219, 97, 162, 0.4);
  --gh-color-sponsors-subtle: rgba(219, 97, 162, 0.1);
  --gh-color-primer-fg-disabled: #484f58;
  --gh-color-primer-canvas-backdrop: rgba(1, 4, 9, 0.8);
  --gh-color-primer-canvas-sticky: rgba(13, 17, 23, 0.95);
  --gh-color-primer-border-active: #f78166;
  --gh-color-primer-border-contrast: rgba(255, 255, 255, 0.2);
  --gh-color-primer-shadow-highlight: 0 0 transparent;
  --gh-color-primer-shadow-inset: 0 0 transparent;
}

.gh-auth-modal {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.gh-auth-code-section {
  display: flex;
  gap: 10px;
  justify-content: center;
  align-items: center;
}

.auth-code {
  font-size: 3em;
}

.github-link-sub-setting {
  padding-left: 2rem;
}

.github-link-slider-input {
  width: 3rem;
}

.github-link-inline {
  display: inline-flex;
  background-color: var(--gh-color-canvas-default);
  border-radius: 4px;
  border: 1px solid var(--gh-color-border-default);
  text-decoration: none;
  color: var(--gh-color-fg-default);
  align-items: stretch;
  max-width: 100%;
  font-size: 0.75em;
  /* Margins are conditional - applied via JS classes */
}

/* Add left margin only when there's text before the tag */
.github-link-inline.has-text-before {
  margin-left: 4px;
}

/* Add right margin only when there's text after the tag */
.github-link-inline.has-text-after {
  margin-right: 4px;
}

.github-link-inline:hover {
  color: var(--gh-color-fg-default);
  text-decoration: none;
}

.github-link-inline-section {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 5px;
  overflow: hidden;
}

.github-link-inline-section:first-child {
  border-radius: 3.5px 0 0 3.5px;
}

.github-link-inline-section:last-child {
  border-radius: 0 3.5px 3.5px 0;
}

.github-link-inline-icon {
  display: inline-flex;
  padding: 2px 0;
}

.github-link-inline-icon>svg {
  width: var(--icon-s);
  height: var(--icon-s);
  stroke-width: var(--icon-s-stroke-width);
}

.github-link-inline-section:has(> .github-link-inline-icon) {
  background-color: var(--gh-color-canvas-inset);
}

.github-link-status-icon[data-status="open"] {
  color: var(--gh-color-open-fg);
}

.github-link-status-icon[data-status="closed"] {
  color: var(--gh-color-closed-fg);
}

.github-link-status-icon.pull-request[data-status="closed"] {
  color: var(--gh-color-closed-fg);
}

.github-link-status-icon.issue[data-status="closed"] {
  color: var(--gh-color-fg-muted);
}

.github-link-status-icon[data-status="done"] {
  color: var(--gh-color-done-fg);
}

.github-link-inline-pr-mergeable-icon[data-status="true"] {
  color: var(--gh-color-success-fg);
}

.github-link-inline-pr-mergeable-icon[data-status="false"] {
  color: var(--gh-color-danger-fg);
}

.github-link-inline-section:has(> .github-link-inline-icon[data-status="open"]) {
  background-color: var(--gh-color-open-subtle);
  border-color: var(--gh-color-open-emphasis);
}

.github-link-inline-section:has(> .github-link-inline-icon[data-status="closed"]) {
  background-color: var(--gh-color-closed-subtle);
  border-color: var(--gh-color-closed-emphasis);
}

.github-link-inline-section:has(> .github-link-inline-icon.pull-request[data-status="closed"]) {
  background-color: var(--gh-color-closed-subtle);
  border-color: var(--gh-color-closed-emphasis);
}

.github-link-inline-section:has(> .github-link-inline-icon.issue[data-status="closed"]) {
  background-color: var(--gh-color-canvas-subtle);
  border-color: var(--gh-color-fg-on-emphasis);
}

.github-link-inline-section:has(> .github-link-inline-icon[data-status="done"]) {
  background-color: var(--gh-color-done-subtle);
  border-color: var(--gh-color-done-emphasis);
}

.github-link-inline-section:has(> .github-link-inline-pr-mergeable-icon[data-status="true"]) {
  background-color: var(--gh-color-success-subtle);
  border-color: var(--gh-color-success-emphasis);
}

.github-link-inline-section:has(> .github-link-inline-pr-mergeable-icon[data-status="false"]) {
  background-color: var(--gh-color-danger-subtle);
  border-color: var(--gh-color-danger-emphasis);
}

.github-link-inline-section:has(> .github-link-inline-error-icon) {
  color: var(--gh-color-closed-fg);
  background-color: var(--gh-color-danger-subtle);
  border-color: var(--gh-color-danger-emphasis);
}

.github-link-inline-section:has(> .github-link-inline-repo) {
  background-color: var(--gh-color-accent-subtle);
  color: var(--gh-color-accent-fg);
  border-color: var(--gh-color-accent-emphasis);
  flex-shrink: 0;
}

.github-link-inline-repo {
  text-wrap: nowrap;
  line-height: var(--line-height-normal);
}

.github-link-inline-pr-title,
.github-link-inline-issue-title,
.github-link-inline-issue-title-section,
.github-link-inline-file {
  overflow: hidden;
  text-overflow: ellipsis;
  text-wrap: nowrap;
  line-height: var(--line-height-normal);
}

.github-link-inline-issue-number {
  color: var(--gh-color-fg-muted);
}

.github-link-inline-file,
.github-link-inline-issue-title-section {
  display: flex;
  gap: 2px;
}

.github-link-inline-file>.github-link-inline-file-line-number,
.github-link-inline-file>.github-link-inline-file-branch {
  color: var(--gh-color-fg-muted);
}

.github-link-table-wrapper {
  margin-block-end: var(--p-spacing);
}

.github-link-table-scroll-wrapper {
  display: block;
  overflow-x: auto;
  white-space: nowrap;
}

.github-link-table-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.github-link-table-pagination {
  display: flex;
  gap: 2px;
}

.github-link-table-footer-external-link {
  font-size: 0.75rem;
}

.github-link-table-footer>button>svg {
  width: var(--icon-s);
  height: var(--icon-s);
  stroke-width: var(--icon-s-stroke-width);
}

table.github-link-table {
  margin-block-end: 0;
}

.github-link-table th {
  font-weight: var(--font-bold);
}

.github-link-table td {
  vertical-align: middle;
}

.github-link-table a {
  text-decoration: none;
}

.github-link-table a:hover {
  text-decoration: underline;
}

.github-link-table-avatar {
  width: max(24px, var(--icon-l));
  height: max(24px, var(--icon-l));
}

.github-link-table-status,
.github-link-table-author,
.github-link-table-labels {
  display: flex;
  gap: 6px;
  align-items: center;
}

.github-link-table-author {
  width: max-content;
}

.github-link-table-labels {
  height: 100%;
  flex-wrap: wrap;
  justify-content: center;
}

.github-link-table-label {
  border-radius: 2em;
  font-size: 0.8em;
  padding: 0 6px;
  border: 1px solid var(--status-color);
}

body.theme-light .github-link-table .github-link-table-labels .github-link-table-label {
  background-color: color-mix(in srgb, var(--status-color) 50%, transparent);
  color: var(--text-normal);
}

body.theme-dark .github-link-table .github-link-table-labels .github-link-table-label {
  background-color: color-mix(in srgb, var(--status-color) 20%, transparent);
  color: var(--status-color);
}

/* Task inline link styling */
.task-inline-link {
  color: var(--link-color, #7f6df2);
  text-decoration: underline;
  cursor: pointer;
}

.task-inline-link:hover {
  color: var(--link-color-hover, #a08fff);
}


/* Task title cell */
.task-title-cell {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Link tooltip - speech bubble style */
.task-link-tooltip {
  background: var(--background-primary);
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  padding: 4px 6px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Speech bubble arrow */
.task-link-tooltip::after {
  content: "";
  position: absolute;
  bottom: -6px;
  left: 50%;
  transform: translateX(-50%);
  border-width: 6px 6px 0 6px;
  border-style: solid;
  border-color: var(--background-primary) transparent transparent transparent;
}

.task-link-tooltip::before {
  content: "";
  position: absolute;
  bottom: -8px;
  left: 50%;
  transform: translateX(-50%);
  border-width: 7px 7px 0 7px;
  border-style: solid;
  border-color: var(--background-modifier-border) transparent transparent transparent;
}

.task-link-tooltip-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--interactive-accent);
}

.task-link-tooltip-icon svg {
  width: 16px;
  height: 16px;
}

.task-link-tooltip:hover {
  background: var(--background-secondary);
}

.task-link-tooltip:hover .task-link-tooltip-icon {
  color: var(--interactive-accent-hover);
}

/* Suffix text after link */
.task-suffix {
  margin-left: 8px;
}

/* Card action tooltip - speech bubble style with buttons */
.task-action-tooltip {
  position: fixed;
  z-index: 9999;
  background: var(--background-primary);
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  padding: 4px 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  display: flex;
  align-items: center;
  gap: 4px;
  transform: translateY(-100%);
}

.task-action-tooltip::after {
  content: "";
  position: absolute;
  bottom: -6px;
  left: 50%;
  transform: translateX(-50%);
  border-width: 6px 6px 0 6px;
  border-style: solid;
  border-color: var(--background-primary) transparent transparent transparent;
}

.task-action-tooltip::before {
  content: "";
  position: absolute;
  bottom: -8px;
  left: 50%;
  transform: translateX(-50%);
  border-width: 7px 7px 0 7px;
  border-style: solid;
  border-color: var(--background-modifier-border) transparent transparent transparent;
}

.task-action-btn {
  background: none;
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
  padding: 2px 8px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 12px;
  color: var(--text-muted);
  transition: all 0.15s ease;
}

.task-action-btn:hover {
  background: var(--background-secondary);
  color: var(--text-normal);
}

.task-action-separator {
  color: var(--text-faint);
  font-size: 12px;
  margin: 0 2px;
}

.task-action-icon-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 4px 6px;
  background: transparent;
  border: none;
  color: var(--text-muted);
  opacity: 0.7;
}

.task-action-icon-btn:hover {
  background: transparent;
  color: var(--interactive-accent);
  opacity: 1;
}

.task-action-link-btn {
  color: var(--text-muted);
  opacity: 0.7;
}

.task-action-link-btn:hover {
  color: var(--interactive-accent);
  opacity: 1;
}

.task-action-icon-btn svg {
  width: 16px;
  height: 16px;
  stroke-width: 2;
  transition: stroke-width 0.15s ease;
}

.task-action-icon-btn:hover svg {
  stroke-width: 2.5;
}

/* Memo action tooltip - same style as task action tooltip */
.memo-action-tooltip {
  background: var(--background-primary);
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  padding: 4px 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  display: flex;
  align-items: center;
  gap: 4px;
}

.memo-action-tooltip::after {
  content: "";
  position: absolute;
  bottom: -6px;
  left: 50%;
  transform: translateX(-50%);
  border-width: 6px 6px 0 6px;
  border-style: solid;
  border-color: var(--background-primary) transparent transparent transparent;
}

.memo-action-tooltip::before {
  content: "";
  position: absolute;
  bottom: -8px;
  left: 50%;
  transform: translateX(-50%);
  border-width: 7px 7px 0 7px;
  border-style: solid;
  border-color: var(--background-modifier-border) transparent transparent transparent;
}

.memo-action-btn {
  background: none;
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
  padding: 2px 8px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 12px;
  color: var(--text-muted);
  transition: all 0.15s ease;
}

.memo-action-btn:hover {
  background: var(--background-secondary);
  color: var(--text-normal);
}

.memo-action-separator {
  color: var(--text-faint);
  font-size: 12px;
  margin: 0 2px;
}

.memo-action-icon-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 4px 6px;
  background: transparent;
  border: none;
  color: var(--text-muted);
  opacity: 0.7;
}

.memo-action-icon-btn:hover {
  background: transparent;
  color: var(--interactive-accent);
  opacity: 1;
}

.memo-action-icon-btn svg {
  width: 16px;
  height: 16px;
  stroke-width: 2;
  transition: stroke-width 0.15s ease;
}

.memo-action-icon-btn:hover svg {
  stroke-width: 2.5;
}

/* Memo card selected state */
.weeknote-card.is-selected {
  background: var(--background-secondary);
  border-color: var(--interactive-accent);
  box-shadow: 0 0 0 1px var(--interactive-accent);
}

.weeknote-schedule-card.is-declined {
  opacity: 0.6;
}

.weeknote-schedule-card.is-declined .schedule-event-name {
  text-decoration: line-through;
}